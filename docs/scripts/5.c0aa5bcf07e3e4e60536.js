(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{cEYR:function(e,t,o){},fXJO:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"init_render",function(){return init_render});var core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("TeQF"),core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_find__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("fbCW"),core_js_modules_es_array_find__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_find__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("2B1R"),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_array_slice__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("+2oP"),core_js_modules_es_array_slice__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_array_slice__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_object_freeze__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("3KgV"),core_js_modules_es_object_freeze__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_object_freeze__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("07d7"),core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_promise__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("5s+n"),core_js_modules_es_promise__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_promise__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("FZtP"),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_7__),_styles_editorialfloor_track_css__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("cEYR"),_styles_editorialfloor_track_css__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(_styles_editorialfloor_track_css__WEBPACK_IMPORTED_MODULE_8__),_styles_editorialfloor_jsoneditor_css__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("gB64"),_styles_editorialfloor_jsoneditor_css__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(_styles_editorialfloor_jsoneditor_css__WEBPACK_IMPORTED_MODULE_9__),lit_html__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("AaG5"),moment__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("wd/R"),moment__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_11__),jsoneditor__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("3PWe"),jsoneditor__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(jsoneditor__WEBPACK_IMPORTED_MODULE_12__),lodash__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("LvDl"),lodash__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_13__);function _templateObject15(){var e=_taggedTemplateLiteral(['\n                        <div class="revision-obj" banana-type="document" banana-id="','">\n                            <div class="revision-details">\n                                <p class="rev-id" banana-id="','">Revision ID ','</p>\n                                <p class="rev-user" banana-id="','"></p>\n                            </div>\n                            <textarea id="consolehistory-content" rows="5" banana-data="','"></textarea>\n                        </div>\n                        ']);return _templateObject15=function(){return e},e}function _templateObject14(){var e=_taggedTemplateLiteral(["\n                        ","\n                    "]);return _templateObject14=function(){return e},e}function _templateObject13(){var e=_taggedTemplateLiteral(['\n                        <div class="revision-obj" banana-type="json" banana-id="','">\n                            <div class="revision-details">\n                                <p class="rev-id" banana-id="','">Revision ID ','</p>\n                                <p class="rev-user" banana-id="','"></p>\n                            </div>\n                            <div class="contenthistory-jsoneditor"></div>\n                        </div>\n                        ']);return _templateObject13=function(){return e},e}function _templateObject12(){var e=_taggedTemplateLiteral(["\n                        ","\n                    "]);return _templateObject12=function(){return e},e}function _templateObject11(){var e=_taggedTemplateLiteral(['\n                <textarea id="consoleedit-content" placeholder="Content (Provide raw JSON, or Dropbox Paper/Google Drive link)" rows="5"></textarea>\n                ']);return _templateObject11=function(){return e},e}function _templateObject10(){var e=_taggedTemplateLiteral(["\n        "]);return _templateObject10=function(){return e},e}function _templateObject9(){var e=_taggedTemplateLiteral(['\n                            <p class="action-jsonmerge">MERGE</p>\n                        ']);return _templateObject9=function(){return e},e}function _templateObject8(){var e=_taggedTemplateLiteral(['\n                <li class="track-item-obj" banana-id="','">\n                    <div class="item-info">\n                        <p class="item-title">','</p>\n                        <p class="item-section">','</p>\n                        <p class="item-lasteditor" banana-id="','">...</p>\n                        <p class="item-reviewstatus" banana-id="','">','</p>\n                    </div>\n                    <div class="item-actions">\n                        <p class="action-itemhistory">REV</p>\n                        <p class="action-edititem">Edit</p>\n                        ','\n                        <p class="action-delitem">DEL</p>\n                    </div>\n                </li>\n                ']);return _templateObject8=function(){return e},e}function _templateObject7(){var e=_taggedTemplateLiteral(['\n            <ul class="track-items">\n                ',"\n            </ul>\n        "]);return _templateObject7=function(){return e},e}function _templateObject6(){var e=_taggedTemplateLiteral(['\n            <p class="no-track-item">No tracker items yet</p>\n        ']);return _templateObject6=function(){return e},e}function _templateObject5(){var e=_taggedTemplateLiteral(["\n        ","\n        "]);return _templateObject5=function(){return e},e}function _templateObject4(){var e=_taggedTemplateLiteral(["\n        "]);return _templateObject4=function(){return e},e}function _templateObject3(){var e=_taggedTemplateLiteral(["\n        "]);return _templateObject3=function(){return e},e}function _templateObject2(){var e=_taggedTemplateLiteral(["\n        "]);return _templateObject2=function(){return e},e}function _templateObject(){var e=_taggedTemplateLiteral(['\n    <div class="editorial-tracker">\n        <div class="editorial-herotext">\n            <p class="hero1">Editorial /tracker</p>\n            <p class="hero1">(track edits/revise contents)</p>\n            <p class="hero2">All changes you made will be saved into database with your editorial id. Once it\'s marked as \'ready for publish\', it\'ll be saved as final data within 24hrs.</p>\n        </div>\n    </div>\n    <div class="editorial-track-actions">\n        <div class="editorial-track-action-refresh">\n            <div class="icon"></div>\n        </div>\n        <div class="editorial-track-action-add">\n            <div class="icon"></div>\n        </div>\n    </div>\n    <div class="editorial-track-console">\n        <div class="track-console-list-column">\n            <div class="item-columns">\n                <p class="column-title">Title</p>\n                <p class="column-section">Section</p>\n                <p class="column-lasteditor">Last Edit By</p>\n                <p class="column-reviewstatus">Status</p>\n            </div>\n            <div class="column-actions">\n                <p class="column-edititem"></p>\n            </div>\n        </div>\n        <div class="track-console-list"></div>\n    </div>\n    <div class="editorial-track-console-add">\n        <div class="console-add-wrapper">\n            <div class="console-herotext">\n                <p class="hero1">Add item</p>\n                <p class="hero2">Please specify the format first. (You can\'t change the format once you posted) And make sure your text document edit is made via Google Drive or Dropbox Paper.</p>\n            </div>\n            <div class="console-add-fields">\n                <input type="text" id="consoleadd-title" placeholder="Title" />\n                <input type="text" id="consoleadd-section" placeholder="Section (e.g. whattrumpsaid)" />\n                <div class="console-add-editor-wrapper">\n                    <p>Specify the format: </p>\n                    <div class="console-add-datatype">\n                        <div class="datatype-action-jsondata" banana-id="json">\n                            <p>Dataset in JSON</p>\n                        </div>\n                        <div class="datatype-action-document" banana-id="document">\n                            <p>Text Document</p>\n                        </div>\n                    </div>\n                </div>\n                <textarea id="consoleadd-content" placeholder="Content (Provide raw JSON, or Dropbox Paper/Google Drive link)" rows="5"></textarea>\n            </div>\n            <div class="console-add-reviewstatus">\n                <div class="reviewstatus-action-pending" banana-id="pending">\n                    <p>Pending</p>\n                </div>\n                <div class="reviewstatus-action-revised" banana-id="revised">\n                    <p>Revised</p>\n                </div>\n                <div class="reviewstatus-action-preapproval" banana-id="preapproval">\n                    <p>Submit For Approval</p>\n                </div>\n                <div class="reviewstatus-action-finalapproval" banana-id="finalapproval">\n                    <p>Approved/Ready For Publish</p>\n                </div>\n            </div>\n            \n        </div>\n        <div class="track-console-header">\n            <div class="console-add-action-send">\n                <div class="icon"></div>\n            </div>\n            <div class="console-add-action-cancel">\n                <div class="icon"></div>\n            </div>\n        </div>\n    </div>\n\n    <div class="editorial-track-console-edit">\n        <div class="console-edit-wrapper">\n            <div class="console-herotext">\n                <p class="hero1">Edit item</p>\n                <p class="hero2">Updating review status is required! Make sure your text document edit is made via Google Drive or Dropbox Paper.</p>\n            </div>\n            <div class="console-edit-fields">\n                <input type="text" id="consoleedit-title" placeholder="Title" />\n                <input type="text" id="consoleedit-section" placeholder="Section (e.g. whattrumpsaid)" />\n                <div class="console-edit-editor"></div>\n            </div>\n            <div class="console-edit-reviewstatus">\n                <div class="reviewstatus-action-pending" banana-id="pending">\n                    <p>Pending</p>\n                </div>\n                <div class="reviewstatus-action-revised" banana-id="revised">\n                    <p>Revised</p>\n                </div>\n                <div class="reviewstatus-action-preapproval" banana-id="preapproval">\n                    <p>Submit For Approval</p>\n                </div>\n                <div class="reviewstatus-action-finalapproval" banana-id="finalapproval">\n                    <p>Approved/Ready For Publish</p>\n                </div>\n            </div>\n\n            <div class="console-edit-historylist">\n            </div>\n        </div>\n        <div class="track-console-header">\n            <div class="console-edit-action-send">\n                <div class="icon"></div>\n            </div>\n            <div class="console-edit-action-cancel">\n                <div class="icon"></div>\n            </div>\n        </div>\n    </div>\n\n    <div class="editorial-track-console-edithistory">\n        <div class="console-edithistory-wrapper">\n            <div class="console-herotext">\n                <p class="hero1">Revisions</p>\n            </div>\n            <div class="console-edithistory-list">\n            </div>\n        </div>\n        <div class="track-console-header">\n            <div class="console-edithistory-action-cancel">\n                <div class="icon"></div>\n            </div>\n        </div>\n    </div>\n    ']);return _templateObject=function(){return e},e}function _taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function init_render(){document.body.classList.add("editorial");Object(lit_html__WEBPACK_IMPORTED_MODULE_10__.b)(Object(lit_html__WEBPACK_IMPORTED_MODULE_10__.a)(_templateObject()),document.querySelector(".minion-contents")),load_trackerdata(),attach_events()}var attach_events=function(){$(".console-edithistory-wrapper, .console-edit-wrapper, .console-add-wrapper").on("scroll",function(e){var t=$(this).parent().find(".track-console-header");this.scrollTop>=50?$(t).addClass("scroll_bar"):$(t).removeClass("scroll_bar")}),document.querySelector(".editorial-track-action-refresh").addEventListener("click",function(e){load_trackerdata()}),document.querySelector(".editorial-track-action-add").addEventListener("click",function(e){document.querySelector(".editorial-track-console-add").classList.add("opened"),document.documentElement.className="n_scroll"}),$(".editorial-track-console-add .console-add-reviewstatus div").on("click",function(e){this.classList.contains("selected")?this.classList.remove("selected"):(Array.prototype.forEach.call(document.querySelectorAll(".editorial-track-console-add .console-add-reviewstatus div"),function(e,t,o){e.classList.remove("selected")}),this.classList.add("selected"))}),$(".editorial-track-console-add .console-add-datatype div").on("click",function(e){this.classList.contains("selected")?this.classList.remove("selected"):(Array.prototype.forEach.call(document.querySelectorAll(".editorial-track-console-add .console-add-datatype div"),function(e,t,o){e.classList.remove("selected")}),this.classList.add("selected"))}),document.querySelector(".editorial-track-console-add .console-add-action-cancel").addEventListener("click",function(e){document.querySelector(".editorial-track-console-add").classList.remove("opened"),document.documentElement.className=""}),document.querySelector(".editorial-track-console-add .console-add-action-send").addEventListener("click",function(e){post_trackerdata()}),document.querySelector(".editorial-track-console-edit .console-edit-action-cancel").addEventListener("click",function(e){document.querySelector(".editorial-track-console-edit").classList.remove("opened"),document.documentElement.className="",document.querySelector(".editorial-track-console-edit .console-edit-editor").setAttribute("banana-type",""),$(".editorial-track-console-edit .console-edit-editor").empty();Object(lit_html__WEBPACK_IMPORTED_MODULE_10__.b)(Object(lit_html__WEBPACK_IMPORTED_MODULE_10__.a)(_templateObject2()),document.querySelector(".editorial-track-console-edit .console-edit-editor"))}),document.querySelector(".editorial-track-console-edit .console-edit-action-send").addEventListener("click",function(e){update_trackerdata()}),document.querySelector(".editorial-track-console-edithistory .console-edithistory-action-cancel").addEventListener("click",function(e){document.querySelector(".editorial-track-console-edithistory").classList.remove("opened"),$(".editorial-track-console-edithistory .console-edithistory-list").empty();Object(lit_html__WEBPACK_IMPORTED_MODULE_10__.b)(Object(lit_html__WEBPACK_IMPORTED_MODULE_10__.a)(_templateObject3()),document.querySelector(".editorial-track-console-edithistory .console-edithistory-list")),document.documentElement.className=""}),$(".editorial-track-console-edit .console-edit-reviewstatus div").on("click",function(e){this.classList.contains("selected")?this.classList.remove("selected"):(Array.prototype.forEach.call(document.querySelectorAll(".editorial-track-console-edit .console-edit-reviewstatus div"),function(e,t,o){e.classList.remove("selected")}),this.classList.add("selected"))})},post_trackerdata=function(){if(""!=document.querySelector(".editorial-track-console-add #consoleadd-title").value&&""!=document.querySelector(".editorial-track-console-add #consoleadd-section").value&&""!=document.querySelector(".editorial-track-console-add #consoleadd-content").value)if(null!=document.querySelector(".editorial-track-console-add .console-add-reviewstatus div.selected")&&null!=document.querySelector(".editorial-track-console-add .console-add-datatype div.selected")){var e;e="//thisisallabout.com:5020/track/article/new";var t=document.querySelector(".editorial-track-console-add .console-add-reviewstatus div.selected").getAttribute("banana-id"),o=document.querySelector(".editorial-track-console-add .console-add-datatype div.selected").getAttribute("banana-id"),a={title:document.querySelector(".editorial-track-console-add #consoleadd-title").value,section:document.querySelector(".editorial-track-console-add #consoleadd-section").value,content:document.querySelector(".editorial-track-console-add #consoleadd-content").value,reviewstatus:t,datatype:o},i={"Content-Type":"application/json","x-access-token":localStorage.getItem("tiaa_stuart_edt_ac_t")};document.querySelector(".minion-dataload").setAttribute("status","dl_d_1"),fetch(e,{method:"POST",headers:i,body:JSON.stringify(a)}).then(function(e){return e.json()}).then(function(e){if(document.querySelector(".minion-dataload").setAttribute("status","dl_d_0"),e.error)return alert("Unable to post a new article to tracker. ERR_MSG_CODE: "+e.error);document.querySelector(".editorial-track-console-add #consoleadd-title").value="",document.querySelector(".editorial-track-console-add #consoleadd-section").value="",document.querySelector(".editorial-track-console-add #consoleadd-content").value="",$(".editorial-track-console-add .console-add-reviewstatus div.selected").removeClass("selected"),$(".editorial-track-console-add .console-add-datatype div.selected").removeClass("selected"),$(".editorial-track-console-add").removeClass("opened"),document.documentElement.className="",load_trackerdata(!0)}).catch(function(e){return alert("Unable to post a new article to tracker. ERR_MSG_CODE: "+e)})}else alert("Please select review stage status and data type of the content.");else alert("Please provide title, section, and contents first.")},load_trackerdata=function(e){var t;t="//thisisallabout.com:5020/track/article";var o={"x-access-token":localStorage.getItem("tiaa_stuart_edt_ac_t")};if(1==e){$(".editorial-track-console .track-console-list").find("ul").remove(),$(".editorial-track-console .track-console-list > p").remove();Object(lit_html__WEBPACK_IMPORTED_MODULE_10__.b)(Object(lit_html__WEBPACK_IMPORTED_MODULE_10__.a)(_templateObject4()),document.querySelector(".editorial-track-console .track-console-list"))}document.querySelector(".minion-dataload").setAttribute("status","dl_d_1"),fetch(t,{method:"GET",headers:o}).then(function(e){return e.json()}).then(function(e){var t=e.reverse();document.querySelector(".minion-dataload").setAttribute("status","dl_d_0"),Object(lit_html__WEBPACK_IMPORTED_MODULE_10__.b)(Object(lit_html__WEBPACK_IMPORTED_MODULE_10__.a)(_templateObject5(),t.length<=0?Object(lit_html__WEBPACK_IMPORTED_MODULE_10__.a)(_templateObject6()):Object(lit_html__WEBPACK_IMPORTED_MODULE_10__.a)(_templateObject7(),t.map(function(e){return Object(lit_html__WEBPACK_IMPORTED_MODULE_10__.a)(_templateObject8(),e._id,e.title,e.section,e.revision_history[e.revision_history.length-1].revision_user,e.reviewstatus,e.reviewstatus,"json"==e.datatype&&"finalapproval"==e.reviewstatus?Object(lit_html__WEBPACK_IMPORTED_MODULE_10__.a)(_templateObject9()):"")}))),document.querySelector(".editorial-track-console .track-console-list")),Array.prototype.forEach.call(document.querySelectorAll(".editorial-track-console .track-console-list .track-item-obj"),function(e,t,o){var a=e.querySelector(".item-lasteditor");$(a).removeClass("fetched"),get_editor_username(a,a.getAttribute("banana-id"))}),attach_consolelist_events()}).catch(function(e){return alert("Unable to load tracker data. ERR_MSG_CODE: "+e)})},get_editor_username=function(e,t){if($(".minion-root").find('[banana-id="'+t+'"].fetched').length>0)e.innerHTML=$(".minion-root").find('[banana-id="'+t+'"].fetched').first().text();else{var o;o="//thisisallabout.com:5020/members/"+t;var a={"x-access-token":localStorage.getItem("tiaa_stuart_edt_ac_t")};document.querySelector(".minion-dataload").setAttribute("status","dl_d_1"),fetch(o,{method:"GET",headers:a}).then(function(e){return e.json()}).then(function(t){t&&(e.innerHTML=t.username),$(e).hasClass("fetched")||$(e).addClass("fetched"),document.querySelector(".minion-dataload").setAttribute("status","dl_d_0")}).catch(function(e){return alert("Unable to load tracker data. ERR_MSG_CODE: "+JSON.stringify(e))})}},update_trackerdata=function(){if(null!=document.querySelector(".editorial-track-console-edit .console-edit-reviewstatus div.selected")){var e;e="//thisisallabout.com:5020/track/article/edit";var t=document.querySelector(".editorial-track-console-edit .console-edit-reviewstatus div.selected").getAttribute("banana-id"),o=null;"json"==document.querySelector(".editorial-track-console-edit .console-edit-editor").getAttribute("banana-type")&&consoleedit_editorelement?o=JSON.stringify(consoleedit_editorelement.get()):"document"==document.querySelector(".editorial-track-console-edit .console-edit-editor").getAttribute("banana-type")&&(o=document.querySelector(".editorial-track-console-edit #consoleedit-content").value);var a={title:document.querySelector(".editorial-track-console-edit #consoleedit-title").value,section:document.querySelector(".editorial-track-console-edit #consoleedit-section").value,content:o,reviewstatus:t,articleid:document.querySelector(".editorial-track-console-edit").getAttribute("banana-id")},i={"Content-Type":"application/json","x-access-token":localStorage.getItem("tiaa_stuart_edt_ac_t")};""!=document.querySelector(".editorial-track-console-edit #consoleedit-title").value&&""!=document.querySelector(".editorial-track-console-edit #consoleedit-section").value&&null!=o?(document.querySelector(".minion-dataload").setAttribute("status","dl_d_1"),fetch(e,{method:"POST",headers:i,body:JSON.stringify(a)}).then(function(e){return e.json()}).then(function(e){if(document.querySelector(".minion-dataload").setAttribute("status","dl_d_0"),e.error)return alert("Unable to post a new article to tracker. ERR_MSG_CODE: "+JSON.stringify(e.error));$(".editorial-track-console-edit #consoleedit-title").value="",$(".editorial-track-console-edit #consoleedit-section").value="",$(".editorial-track-console-edit").attr("banana-id","");Object(lit_html__WEBPACK_IMPORTED_MODULE_10__.b)(Object(lit_html__WEBPACK_IMPORTED_MODULE_10__.a)(_templateObject10()),document.querySelector(".editorial-track-console-edit .console-edit-editor")),$(".editorial-track-console-edit .console-edit-reviewstatus div.selected").removeClass("selected"),$(".editorial-track-console-edit").removeClass("opened"),document.documentElement.className="",load_trackerdata(!0)}).catch(function(e){return alert("Unable to post a new article to tracker. ERR_MSG_CODE: "+e)})):alert("Please provide title, section, and contents first.")}else alert("Please select or update review stage status.")},consoleedit_editorelement=null,attach_consolelist_events=function attach_consolelist_events(){$(".editorial-track-console .track-item-obj .action-delitem").off("click"),$(".editorial-track-console .track-item-obj .action-edititem").off("click"),$(".editorial-track-console .track-item-obj .action-itemhistory").off("click"),$(".editorial-track-console .track-item-obj .action-delitem").on("click",function(e){if(document.querySelector(".minion-bidobido").classList.add("opened"),confirm("Are you sure you really want to delete this item?")){var t,o=getParents(this,".track-item-obj")[0];t="//thisisallabout.com:5020/track/article/"+getParents(this,".track-item-obj")[0].getAttribute("banana-id");var a={"x-access-token":localStorage.getItem("tiaa_stuart_edt_ac_t")};document.querySelector(".minion-dataload").setAttribute("status","dl_d_1"),fetch(t,{method:"DELETE",headers:a}).then(function(e){return e.json()}).then(function(e){if(document.querySelector(".minion-bidobido").classList.remove("opened"),document.querySelector(".minion-dataload").setAttribute("status","dl_d_0"),e.error)return alert("Unable to post a new article to tracker. ERR_MSG_CODE: "+e.error);o.remove()})}else document.querySelector(".minion-bidobido").classList.remove("opened")}),$(".editorial-track-console .track-item-obj .action-edititem").on("click",function(e){document.querySelector(".minion-bidobido").classList.add("opened");var t,o=getParents(this,".track-item-obj")[0].getAttribute("banana-id");t="//thisisallabout.com:5020/track/article/"+o;var a={"x-access-token":localStorage.getItem("tiaa_stuart_edt_ac_t")};document.querySelector(".minion-dataload").setAttribute("status","dl_d_1"),fetch(t,{method:"GET",headers:a}).then(function(e){return e.json()}).then(function(e){document.querySelector(".minion-bidobido").classList.remove("opened");var t=e[0].revision_history.reverse();if(document.querySelector(".editorial-track-console-edit").setAttribute("banana-id",o),document.querySelector(".editorial-track-console-edit #consoleedit-title").value=e[0].title,document.querySelector(".editorial-track-console-edit #consoleedit-section").value=e[0].section,Array.prototype.forEach.call(document.querySelectorAll(".editorial-track-console-edit .console-edit-reviewstatus div"),function(e,t,o){e.classList.remove("selected")}),document.querySelector('.editorial-track-console-edit .console-edit-reviewstatus div[banana-id="'+e[0].reviewstatus+'"]').classList.add("selected"),document.querySelector(".minion-dataload").setAttribute("status","dl_d_0"),"json"==e[0].datatype)(consoleedit_editorelement=new jsoneditor__WEBPACK_IMPORTED_MODULE_12___default.a(document.querySelector(".editorial-track-console-edit .console-edit-editor"),{})).set(JSON.parse(t[0].revision_item)),document.querySelector(".editorial-track-console-edit .console-edit-editor").setAttribute("banana-type","json");else{Object(lit_html__WEBPACK_IMPORTED_MODULE_10__.b)(Object(lit_html__WEBPACK_IMPORTED_MODULE_10__.a)(_templateObject11()),document.querySelector(".editorial-track-console-edit .console-edit-editor")),document.querySelector(".editorial-track-console-edit .console-edit-editor").setAttribute("banana-type","document"),document.querySelector(".editorial-track-console-edit .console-edit-editor textarea").value=t[0].revision_item}document.querySelector(".editorial-track-console-edit").classList.add("opened"),document.documentElement.className="n_scroll"})}),$(".editorial-track-console .track-item-obj .action-itemhistory").on("click",function(e){var t;document.querySelector(".minion-bidobido").classList.add("opened"),t="//thisisallabout.com:5020/track/article/"+getParents(this,".track-item-obj")[0].getAttribute("banana-id");var o={"x-access-token":localStorage.getItem("tiaa_stuart_edt_ac_t")};document.querySelector(".minion-dataload").setAttribute("status","dl_d_1"),fetch(t,{method:"GET",headers:o}).then(function(e){return e.json()}).then(function(e){document.querySelector(".minion-bidobido").classList.remove("opened"),lodash__WEBPACK_IMPORTED_MODULE_13___default.a.filter(e,function(e){var t=e.revision_history.reverse();if("json"==e.datatype){Object(lit_html__WEBPACK_IMPORTED_MODULE_10__.b)(Object(lit_html__WEBPACK_IMPORTED_MODULE_10__.a)(_templateObject12(),t.map(function(e){return Object(lit_html__WEBPACK_IMPORTED_MODULE_10__.a)(_templateObject13(),e.revision_id,e.revision_id,e.revision_id,e.revision_user)})),document.querySelector(".editorial-track-console-edithistory .console-edithistory-list"))}else{Object(lit_html__WEBPACK_IMPORTED_MODULE_10__.b)(Object(lit_html__WEBPACK_IMPORTED_MODULE_10__.a)(_templateObject14(),t.map(function(e){return Object(lit_html__WEBPACK_IMPORTED_MODULE_10__.a)(_templateObject15(),e.revision_id,e.revision_id,e.revision_id,e.revision_user,e.revision_item)})),document.querySelector(".editorial-track-console-edithistory .console-edithistory-list"))}}),Array.prototype.forEach.call(document.querySelectorAll(".editorial-track-console-edithistory .console-edithistory-list .revision-obj"),function(t,o,a){var i=[];(lodash__WEBPACK_IMPORTED_MODULE_13___default.a.filter(e,function(e){lodash__WEBPACK_IMPORTED_MODULE_13___default.a.filter(e.revision_history,function(e){e.revision_id==t.getAttribute("banana-id")&&i.push(e.revision_item)})}),"json"==t.getAttribute("banana-type"))?new jsoneditor__WEBPACK_IMPORTED_MODULE_12___default.a(t,{}).set(JSON.parse(i)):t.querySelector("textarea").value=i[0];get_editor_username(t.querySelector(".rev-user"),t.querySelector(".rev-user").getAttribute("banana-id"))}),document.querySelector(".minion-dataload").setAttribute("status","dl_d_0"),document.querySelector(".editorial-track-console-edithistory").classList.add("opened"),document.documentElement.className="n_scroll"})}),$(".editorial-track-console .track-item-obj .action-jsonmerge").on("click",function(e){var filepath=prompt("Please provide the path of a dataset you're going to merge");if(filepath){document.querySelector(".minion-bidobido").classList.add("opened");var itemid=getParents(this,".track-item-obj")[0].getAttribute("banana-id"),api_url;api_url="//thisisallabout.com:5020/track/article/"+itemid;var api_header={"x-access-token":localStorage.getItem("tiaa_stuart_edt_ac_t")};document.querySelector(".minion-dataload").setAttribute("status","dl_d_1"),fetch(api_url,{method:"GET",headers:api_header}).then(function(e){return e.json()}).then(function(response){document.querySelector(".minion-dataload").setAttribute("status","dl_d_0"),document.querySelector(".minion-bidobido").classList.remove("opened");var reversedres=response[0].revision_history.reverse(),d_content=[],dataset_d=null,dataset_url;dataset_url="https://thisisallabout.com/dataset/"+filepath+".json",fetch(dataset_url).then(function(e){return e.text()}).then(function(text){var module=eval(text),dataset_d=module,d_content=[],edited_content=JSON.parse(reversedres[0].revision_item),merged=lodash__WEBPACK_IMPORTED_MODULE_13___default.a.filter(dataset_d,function(e){return lodash__WEBPACK_IMPORTED_MODULE_13___default.a.filter(e.data,function(e,t){return e.header=edited_content[t].header,edited_content[t].msg&&(e.msg=edited_content[t].msg),console.log(e),e})}),filename=prompt("Please provide the file name");if(!filename)return alert("Failed to create a json file: NO_FILENAME");var dataStr="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(merged)),downloadAnchorNode=document.createElement("a");downloadAnchorNode.setAttribute("href",dataStr),downloadAnchorNode.setAttribute("download",filename+".json"),downloadAnchorNode.click(),downloadAnchorNode.remove()})})}})},getParents=function(e,t){Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),o=t.length;--o>=0&&t.item(o)!==this;);return o>-1});for(var o=[];e&&e!==document;e=e.parentNode)t?e.matches(t)&&o.push(e):o.push(e);return o}},gB64:function(e,t,o){}}]);